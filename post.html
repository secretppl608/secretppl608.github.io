<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客</title>
</head>
<body>
    <form id="post-form" name="form">
        <input type="text" name="title">
        <input type="text" name="content">
        <button type="submit" id="post-form-submit">提交</button>
    </form>
    <script>
        document.getElementById("post-form-submit").addEventListener('click',func)
        document.getElementById("post-form").addEventListener('submit',func)
        async function func(e){
            e.preventDefault();
            let formdata = new FormData(document.forms.namedItem('form'))
            var jsonObj = {};
            formdata.forEach((value, key) => (jsonObj[key] = value));
            fetch('https://backrooms-neo-t.site/api/post',{
                method:'POST',
                headers:{
                    "Content-Type": "application/json"
                },
                body:JSON.stringify({
                    jsonObj
                }),
            }).then((data)=>{
                document.writeln(data);
            }).catch((error)=>{
                document.writeln(error);
            })
        }
    </script>
</body>
</html>